import PageAnimations,{Animations}from"animations";class ProductRecommendations extends HTMLElement{constructor(){super(),this.fetch_delay=0}connectedCallback(){if(this.onPageLoad=this.hasAttribute("on-page-load"),this.onPageLoad)this.#e();else{new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(t.unobserve(this),this.fetch_delay=Number(window.theme?.complementary_products_fetch_delay||"0"),setTimeout((()=>{this.#e()}),this.fetch_delay))}))}).bind(this),{rootMargin:"0px 0px 400px 0px"}).observe(this)}}#e(){fetch(this.dataset.url).then((e=>e.text())).then((e=>{const t=document.createElement("div");t.innerHTML=e;const n=t.querySelector("product-recommendations");if(n&&n.innerHTML.trim().length){const e=this.querySelectorAll(".product-card"),t=Array.from(n.querySelectorAll(".product-card"));if(0===e.length&&0===t.length?this.setAttribute("hidden",""):this.removeAttribute("hidden"),e.length>0){const e=n.querySelectorAll("image-skeleton"),t=n.querySelector(".js-animate-sequence");e.forEach((e=>e.setAttribute("loaded",""))),Animations.setRevealedState(t)}if(t.length>0&&t.length>0&&e.length===t.length?e.forEach(((e,n)=>{const o=t[n].querySelector("[product-card-link]").getAttribute("href");e.querySelectorAll("[product-card-link]").forEach((e=>e.setAttribute("href",o)))})):(this.innerHTML=n.innerHTML,PageAnimations.setup(this)),"true"===this.dataset.quickShopDynamicCheckout){const e=setInterval((()=>{window.Shopify.PaymentButton&&(window.Shopify.PaymentButton.init(),clearInterval(e))}),50)}}else this.setAttribute("hidden","")})).catch((e=>{console.error(e)}))}}customElements.define("product-recommendations",ProductRecommendations);
//# sourceMappingURL=product-recommendations.js.map
